<head>
  <%- include('../partials/head') %>
</head>

<body>
  <header>
    <%- include('../partials/header_nol') %>
  </header>

  <main class="py-10 my-5 flex flex-wrap justify-center">
    <div class="mx-auto w-3/4 lg:w-1/3 shadow-black shadow-lg container p-10 my-4 bg-gradient-to-r from-[var(--color2)] to-[var(--color5)] rounded-lg text-[var(--color3)]">
      <h1 class="font-bold text-4xl text-white p-2">Welcome back</h1>
      <h3 class="font-bold mb-4 p-2">Login</h3>

      <% if (errorMessage) { %>
      <div class="bg-red-200 border-red-600 border-2 rounded-md p-2 m-1 mb-4 w-4/5 py-2 mx-auto text-red-800">
        <%= errorMessage %>
      </div>
      <% } %>

      <form action="/login" method="post" class="flex flex-col items-center text-black text-xs">

        <input type="email" name="email" id="email" placeholder="Email" class="rounded-md p-2 m-1 mb-4 w-4/5 py-3" required />

        <input type="password" name="password" id="password" placeholder="Password" class="rounded-md p-2 m-1 mb-4 w-4/5 py-3" required />

        <button type="submit" class="text-gray-200 hover:text-white hover:opacity-90 border-2 rounded-lg bg-[var(--color8)] w-4/5 py-3">Submit</button>
      </form>
    </div>

    <img src="/images/login.svg" class="h-[60vh] m-auto p-4">
  </main>

  <footer>
    <%- include('../partials/footer') %>
  </footer>

  <script>
    const email = document.getElementById("email");
    const passwordInput = document.getElementById("password");


    const passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;

    passwordInput.addEventListener("input", () => {
      if (!passwordRegex.test(passwordInput.value)) {
        passwordInput.setCustomValidity("Password should be at least 8 characters long, and contain at least one digit, one lowercase and one uppercase letter.");
        passwordInput.reportValidity();
      } else {
        passwordInput.setCustomValidity("");
      }
    });
  </script>

</body>