<head>
  <%- include('../partials/head') %>
</head>

<body>
  <header>
    <%- include('../partials/header_nol') %>
  </header>

  <main>
    <div class="container mx-auto my-8 p-1 flex flex-col items-center lg:flex-row lg:justify-between">
      <div class=" mx-auto p-5">
        <h1 class="text-3xl text-[var(--color2)] font-bold md:text-5xl">Outsourcing work has<br> never been easier.</h1>
        <p class="my-3 text-center">Join the community</p>
        <hr>

        <div class="flex justify-around">
          <p class="my-3 mb-6">Already a member?
            <button class="border-2 m-1 ml-12 p-1 rounded-lg text-white bg-[var(--color2)]"><a href="/login">Login</a></button>
          </p>
        </div>

        <img src="/images/signup.svg" class=" h-60">
      </div>
      <div class="w-3/4 lg:w-1/3  container p-8 mx-auto my-3 shadow-black shadow-lg bg-gradient-to-r from-[var(--color2)] to-[var(--color5)] rounded-lg text-gray-600">

        <h3 class="ml-8 font-bold text-4xl text-white  mb-4">Register</h3>

        <% if (errorMessage) { %>
        <div class="bg-red-200 border-red-600 border-2 rounded-md p-2 m-1 mb-4 w-4/5 py-2 mx-auto text-red-800">
          <%= errorMessage %>
        </div>
        <% } %>

        <form action="/signup" method="post" class="flex flex-col items-center text-xs">
          <input type="text" name="firstname" id="fName" placeholder="First-Name" class="rounded-md p-2 m-1 mb-4 w-4/5" required />

          <input type="text" name="lastname" id="lName" placeholder="Last-Name" class="rounded-md p-2 m-1 mb-4 w-4/5 py-3" required />

          <input type="email" name="email" placeholder="Email" id="email" class="rounded-md p-2 m-1 mb-4 w-4/5 py-3" required />

          <input type="password" name="password" id="password" placeholder="Password" class="rounded-md p-2 m-1 mb-4 w-4/5 py-3" required />

          <button type="submit" class="text-gray-200 hover:text-white hover:opacity-90 border-2 rounded-lg bg-[var(--color8)] w-4/5 py-3">Submit</button>
        </form>
      </div>
    </div>
  </main>

  <footer>
    <%- include('../partials/footer') %>
  </footer>

  <script>
    const firstNameInput = document.getElementById("fName");
    const lastNameInput = document.getElementById("lName");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");

    const firstNameRegex = /^[a-zA-Z]+$/;
    firstNameInput.addEventListener("blur", () => {
      if (!firstNameRegex.test(firstNameInput.value)) {
        firstNameInput.setCustomValidity("Please enter only alphabets!");
        firstNameInput.reportValidity();
      } else {
        firstNameInput.setCustomValidity("");
      }
    });

    const lastNameRegex = /^[a-zA-Z]+$/;
    lastNameInput.addEventListener("blur", () => {
      if (!lastNameRegex.test(lastNameInput.value)) {
        lastNameInput.setCustomValidity("Please enter only alphabets!");
        lastNameInput.reportValidity();
      } else {
        lastNameInput.setCustomValidity("");
      }
    });

    const emailRegex = /^([A-Za-z0-9_\-\.])+\@([A-Za-z\-\.])+\.([A-Za-z]{2,4})$/;
    emailInput.addEventListener("blur", () => {
      if (!emailRegex.test(emailInput.value)) {
        emailInput.setCustomValidity("Please enter a valid email address!");
        emailInput.reportValidity();
      } else {
        emailInput.setCustomValidity("");
      }
    });

    const passwordRegex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
    passwordInput.addEventListener("blur", () => {
      if (!passwordRegex.test(passwordInput.value)) {
        passwordInput.setCustomValidity("Password should be at least 8 characters long, and contain at least one digit, one lowercase and one uppercase letter.");
        passwordInput.reportValidity();
      } else {
        passwordInput.setCustomValidity("");
      }
    });
  </script>

</body>